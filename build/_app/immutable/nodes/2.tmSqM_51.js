import"../chunks/Bzak7iHL.js";import{d as Ce,c as xe,e as Ze,s as Se,o as ui,a as di}from"../chunks/DQxm8CSf.js";import{y as se,z as Rt,aE as vi,aF as gi,l as fi,x as Ot,F as Wt,G as je,I as Vt,J as Ft,M as Ne,U as hi,L as Ht,h as s,V as mi,A as pi,H as _i,B as Nt,C as St,D as at,ae as wi,ai as Ci,am as Ut,aa as Gt,aA as bi,aG as At,aH as yi,K as qt,aI as Li,aJ as st,aK as Jt,aL as xi,aM as Mi,ag as Ni,aN as Si,al as Ai,aO as Ii,Z as Ei,aP as zi,aQ as Bi,aR as ki,aS as Di,aT as Pi,p as ce,m as $,q as F,aB as U,v as H,t as me,a as L,o as ue,X as f,aC as V,f as Q,w as X,c as ne,s as ye,aU as ie,d as Le,W as fe,aV as Ti}from"../chunks/Btx9kS4c.js";import{p as G,i as J,b as Ri}from"../chunks/FgG0k4tK.js";import{d as gt,w as $e}from"../chunks/-KrFYyFl.js";import{i as Oi}from"../chunks/DKyHe1Y4.js";let It=!1;function Wi(){It||(It=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Vi(n,e,t){se&&Rt();var a=n,l=hi,c,u,_=null,m=vi()?gi:fi;function w(){c&&Ht(c),_!==null&&(_.lastChild.remove(),a.before(_),_=null),c=u}Ot(()=>{if(m(l,l=e())){var x=a,k=Ft();k&&(_=document.createDocumentFragment(),_.append(x=Wt())),u=je(()=>t(x)),k?Vt.add_callback(w):w()}}),se&&(a=Ne)}function Fi(n,e){return e}function Hi(n,e,t){for(var a=n.items,l=[],c=e.length,u=0;u<c;u++)Si(e[u].e,l,!0);var _=c>0&&l.length===0&&t!==null;if(_){var m=t.parentNode;Ai(m),m.append(t),a.clear(),_e(n,e[0].prev,e[c-1].next)}Ii(l,()=>{for(var w=0;w<c;w++){var x=e[w];_||(a.delete(x.k),_e(n,x.prev,x.next)),Jt(x.e,!_)}})}function Kt(n,e,t,a,l,c=null){var u=n,_={flags:e,items:new Map,first:null};se&&Rt();var m=null,w=!1,x=new Map,k=mi(()=>{var g=t();return Gt(g)?g:g==null?[]:Ut(g)}),p,P;function M(){Ui(P,p,_,x,u,l,e,a,t),c!==null&&(p.length===0?m?qt(m):m=je(()=>c(u)):m!==null&&Ht(m,()=>{m=null}))}Ot(()=>{P??(P=Ei),p=s(k);var g=p.length;if(w&&g===0)return;w=g===0;let C=!1;if(se){var T=pi(u)===_i;T!==(g===0)&&(u=Nt(),St(u),at(!1),C=!0)}if(se){for(var z=null,N,v=0;v<g;v++){if(Ne.nodeType===wi&&Ne.data===Ci){u=Ne,C=!0,at(!1);break}var A=p[v],b=a(A,v);N=ct(Ne,_,z,null,A,b,v,l,e,t),_.items.set(b,N),z=N}g>0&&St(Nt())}if(se)g===0&&c&&(m=je(()=>c(u)));else if(Ft()){var I=new Set,E=Vt;for(v=0;v<g;v+=1){A=p[v],b=a(A,v);var B=_.items.get(b)??x.get(b);B?Qt(B,A,v):(N=ct(null,_,null,null,A,b,v,l,e,t,!0),x.set(b,N)),I.add(b)}for(const[O,S]of _.items)I.has(O)||E.skipped_effects.add(S.e);E.add_callback(M)}else M();C&&at(!0),s(k)}),se&&(u=Ne)}function Ui(n,e,t,a,l,c,u,_,m){var w=e.length,x=t.items,k=t.first,p=k,P,M=null,g=[],C=[],T,z,N,v;for(v=0;v<w;v+=1){if(T=e[v],z=_(T,v),N=x.get(z),N===void 0){var A=a.get(z);if(A!==void 0){a.delete(z),x.set(z,A);var b=M?M.next:p;_e(t,M,A),_e(t,A,b),rt(A,b,l),M=A}else{var I=p?p.e.nodes_start:l;M=ct(I,t,M,M===null?t.first:M.next,T,z,v,c,u,m)}x.set(z,M),g=[],C=[],p=M.next;continue}if(Qt(N,T,v),(N.e.f&st)!==0&&qt(N.e),N!==p){if(P!==void 0&&P.has(N)){if(g.length<C.length){var E=C[0],B;M=E.prev;var O=g[0],S=g[g.length-1];for(B=0;B<g.length;B+=1)rt(g[B],E,l);for(B=0;B<C.length;B+=1)P.delete(C[B]);_e(t,O.prev,S.next),_e(t,M,O),_e(t,S,E),p=E,M=S,v-=1,g=[],C=[]}else P.delete(N),rt(N,p,l),_e(t,N.prev,N.next),_e(t,N,M===null?t.first:M.next),_e(t,M,N),M=N;continue}for(g=[],C=[];p!==null&&p.k!==z;)(p.e.f&st)===0&&(P??(P=new Set)).add(p),C.push(p),p=p.next;if(p===null)continue;N=p}g.push(N),M=N,p=N.next}if(p!==null||P!==void 0){for(var D=P===void 0?[]:Ut(P);p!==null;)(p.e.f&st)===0&&D.push(p),p=p.next;var j=D.length;if(j>0){var ee=null;Hi(t,D,ee)}}n.first=t.first&&t.first.e,n.last=M&&M.e;for(var q of a.values())Jt(q.e);a.clear()}function Qt(n,e,t,a){yi(n.v,e),n.i=t}function ct(n,e,t,a,l,c,u,_,m,w,x){var k=(m&xi)!==0,p=(m&Mi)===0,P=k?p?bi(l,!1,!1):At(l):l,M=(m&Li)===0?u:At(u),g={i:M,v:P,k:c,a:null,e:null,prev:t,next:a};try{if(n===null){var C=document.createDocumentFragment();C.append(n=Wt())}return g.e=je(()=>_(n,P,M,w),se),g.e.prev=t&&t.e,g.e.next=a&&a.e,t===null?x||(e.first=g):(t.next=g,t.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function rt(n,e,t){for(var a=n.next?n.next.e.nodes_start:t,l=e?e.e.nodes_start:t,c=n.e.nodes_start;c!==null&&c!==a;){var u=Ni(c);l.before(c),c=u}}function _e(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const Et=[...` 	
\r\fÂ \v\uFEFF`];function Gi(n,e,t){var a=n==null?"":""+n;if(e&&(a=a?a+" "+e:e),t){for(var l in t)if(t[l])a=a?a+" "+l:l;else if(a.length)for(var c=l.length,u=0;(u=a.indexOf(l,u))>=0;){var _=u+c;(u===0||Et.includes(a[u-1]))&&(_===a.length||Et.includes(a[_]))?a=(u===0?"":a.substring(0,u))+a.substring(_+1):u=_}}return a===""?null:a}function qi(n,e){return n==null?null:String(n)}function he(n,e,t,a,l,c){var u=n.__className;if(se||u!==t||u===void 0){var _=Gi(t,a,c);(!se||_!==n.getAttribute("class"))&&(_==null?n.removeAttribute("class"):n.className=_),n.__className=t}else if(c&&l!==c)for(var m in c){var w=!!c[m];(l==null||w!==!!l[m])&&n.classList.toggle(m,w)}return c}function Yt(n,e,t,a){var l=n.__style;if(se||l!==e){var c=qi(e);(!se||c!==n.getAttribute("style"))&&(c==null?n.removeAttribute("style"):n.style.cssText=c),n.__style=e}return a}const Ji=Symbol("is custom element"),Ki=Symbol("is html");function Zt(n){if(se){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var a=n.value;Y(n,"value",null),n.value=a}if(n.hasAttribute("checked")){var l=n.checked;Y(n,"checked",null),n.checked=l}}};n.__on_r=t,Pi(t),Wi()}}function jt(n,e){var t=Xt(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Y(n,e,t,a){var l=Xt(n);se&&(l[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||l[e]!==(l[e]=t)&&(e==="loading"&&(n[zi]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Qi(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Xt(n){return n.__attributes??(n.__attributes={[Ji]:n.nodeName.includes("-"),[Ki]:n.namespaceURI===Bi})}var zt=new Map;function Qi(n){var e=zt.get(n.nodeName);if(e)return e;zt.set(n.nodeName,e=[]);for(var t,a=n,l=Element.prototype;l!==a;){t=Di(a);for(var c in t)t[c].set&&e.push(c);a=ki(a)}return e}function ae(n,e){var c;var t=(c=n.$$events)==null?void 0:c[e.type],a=Gt(t)?t.slice():t==null?[]:[t];for(var l of a)l.call(this,e)}function Yi(n,e,t,a){if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?a:t==="a"?a.call(n):a?a.value:e.get(n)}function Zi(n,e,t,a,l){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Ye;const oe="__TAURI_TO_IPC_KEY__";function ji(n,e=!1){return window.__TAURI_INTERNALS__.transformCallback(n,e)}async function d(n,e={},t){return window.__TAURI_INTERNALS__.invoke(n,e,t)}class Xi{get rid(){return Yi(this,Ye,"f")}constructor(e){Ye.set(this,void 0),Zi(this,Ye,e)}async close(){return d("plugin:resources|close",{rid:this.rid})}}Ye=new WeakMap;function $i(n,e,t,a,l,c){const u=n.currentTarget;f(e,!1),f(t,!1),f(a,l.volume,!0),c("dragstart",{sessionId:l.sessionId});try{u.setPointerCapture(n.pointerId)}catch{}}function ea(n,e){n.buttons===1&&(s(e)||f(e,!0))}function ta(n,e,t,a,l){var u;const c=n.currentTarget;if(s(e)){const _=parseFloat(c.value);t("dragend",{sessionId:a.sessionId,volume:_})}if(f(e,!1),f(l,!1),(u=c.hasPointerCapture)!=null&&u.call(c,n.pointerId))try{c.releasePointerCapture(n.pointerId)}catch{}}var na=$('<div class="volume-bar-container svelte-v44myx"><input type="range" class="volume-slider svelte-v44myx" min="0" max="1" step="0.01"/></div>');function ia(n,e){ce(e,!0);let t=G(e,"disabled",3,!1);const a=xe();let l=U(!1),c=U(!1),u=U(0);function _(k){const p=k.currentTarget,P=parseFloat(p.value);if(!(s(c)&&!s(l))){if(!s(l)){f(c,!0),p.value=s(u).toString(),a("trackclick",{sessionId:e.sessionId,volume:P});return}a("dragmove",{sessionId:e.sessionId,volume:P})}}function m(k){k.preventDefault();const p=k.deltaY>0?-.05:.05,P=Math.max(0,Math.min(1,e.volume+p));a("wheel",{sessionId:e.sessionId,volume:P})}var w=na(),x=F(w);Zt(x),Y(x,"aria-valuemin",0),Y(x,"aria-valuemax",100),x.__pointerdown=[$i,l,c,u,e,a],x.__pointermove=[ea,l],x.__input=_,x.__pointerup=[ta,l,a,e,c],H(w),me((k,p)=>{jt(x,e.volume),Y(x,"aria-label",`Volume for ${e.displayName??""}`),Y(x,"aria-valuenow",k),Y(x,"aria-valuetext",`${p??""} percent`),Yt(x,`--volume-percent: ${e.volume*100}%`),x.disabled=t()},[()=>Math.round(e.volume*100),()=>Math.round(e.volume*100)]),Ze("wheel",x,m),L(n,w),ue()}Ce(["pointerdown","pointermove","input","pointerup"]);function aa(n,e,t,a,l){if(!e())switch(t.variant){case"toggle":a("toggle");break;case"bind":l()?a("cancel"):a("startbind");break;case"mapping":a("remove");break;case"action":a("click");break}}var sa=$('<span class="bind-icon default svelte-16phvha" aria-hidden="true"><!></span> <span class="bind-icon hover svelte-16phvha" aria-hidden="true"><!></span>',1),ra=$('<span class="mapping-icon default svelte-16phvha" aria-hidden="true"><!></span> <span class="mapping-icon hover svelte-16phvha" aria-hidden="true"><!></span>',1),la=$('<button type="button"><!></button>');function pe(n,e){ce(e,!0);let t=G(e,"active",3,!1),a=G(e,"disabled",3,!1),l=G(e,"danger",3,!1),c=G(e,"ariaLabel",3,""),u=G(e,"title",3,"");const _=xe(),m=V(()=>{if(a()&&e.variant!=="mapping")return"btn-unavail";switch(e.variant){case"toggle":return t()?"btn-enabled":"btn-disabled";case"bind":return"btn-disabled";case"mapping":return"btn-enabled mapping-badge mapping-removable";case"action":return l()?"btn-close":"btn-disabled";default:return"btn-disabled"}});var w=la();let x;w.__click=[aa,a,e,_,t];var k=F(w);{var p=M=>{var g=sa(),C=Q(g),T=F(C);{var z=b=>{var I=ne(),E=Q(I);ye(E,()=>e.icon),L(b,I)};J(T,b=>{e.icon&&b(z)})}H(C);var N=X(C,2),v=F(N);{var A=b=>{var I=ne(),E=Q(I);ye(E,()=>e.hoverIcon),L(b,I)};J(v,b=>{e.hoverIcon&&b(A)})}H(N),L(M,g)},P=M=>{var g=ne(),C=Q(g);{var T=N=>{var v=ra(),A=Q(v),b=F(A);{var I=S=>{var D=ne(),j=Q(D);ye(j,()=>e.icon),L(S,D)};J(b,S=>{e.icon&&S(I)})}H(A);var E=X(A,2),B=F(E);{var O=S=>{var D=ne(),j=Q(D);ye(j,()=>e.removeIcon),L(S,D)};J(B,S=>{e.removeIcon&&S(O)})}H(E),L(N,v)},z=N=>{var v=ne(),A=Q(v);{var b=I=>{var E=ne(),B=Q(E);ye(B,()=>e.icon),L(I,E)};J(A,I=>{e.icon&&I(b)})}L(N,v)};J(C,N=>{e.variant==="mapping"?N(T):N(z,!1)},!0)}L(M,g)};J(k,M=>{e.variant==="bind"&&!t()?M(p):M(P,!1)})}H(w),me(M=>{x=he(w,1,`btn btn-channel ${s(m)??""}`,"svelte-16phvha",x,M),w.disabled=a(),Y(w,"aria-label",c()),Y(w,"aria-pressed",e.variant==="toggle"?t():void 0),Y(w,"title",u())},[()=>({"btn-bind":e.variant==="bind"&&!t(),active:t()&&e.variant==="toggle",button:e.variant==="mapping"})]),L(n,w),ue()}Ce(["click"]);async function oa(n,e,t,a){var l;e()||t()||await((l=a.onclick)==null?void 0:l.call(a))}var ca=$("<button> </button>");function ua(n,e){ce(e,!0);let t=G(e,"label",3,"Button"),a=G(e,"loadingLabel",3,"Loading..."),l=G(e,"disabled",3,!1),c=G(e,"isLoading",3,!1),u=G(e,"class",3,"");var _=ca();_.__click=[oa,l,c,e];var m=F(_,!0);H(_),me(()=>{he(_,1,`btn-pill ${u()??""}`,"svelte-6sles4"),_.disabled=l()||c(),Y(_,"aria-label",e.ariaLabel),Y(_,"aria-busy",c()),Se(m,c()?a():t())}),L(n,_),ue()}Ce(["click"]);function da(n,e,t){n.stopPropagation(),e("select",{processName:t.processName})}var va=$('<button role="option" aria-selected="false"> </button>');function ut(n,e){ce(e,!0);let t=G(e,"danger",3,!1),a=G(e,"fullWidth",3,!1),l=G(e,"animationIndex",3,0);const c=xe();var u=va();let _;u.__click=[da,c,e];var m=F(u,!0);H(u),me(w=>{_=he(u,1,"list-option svelte-3jfz80",null,_,w),Y(u,"aria-label",e.ariaLabel||(e.displayName?`Select ${e.displayName}`:"")),Yt(u,`--animation-delay: ${l()*.05}s`),Se(m,e.displayName||"")},[()=>({danger:t(),"full-width":a()})]),L(n,u),ue()}Ce(["click"]);Ce(["click"]);const $t=$e([]),en=$e([]),tn=$e([]),nn=$e(new Set),ga=gt([en,tn,nn],([n,e,t])=>new Set([...n.map(a=>a.processName),...e.map(a=>a.processName),...t]));gt([$t,en,tn,nn],([n,e,t,a])=>{const l=new Set([...e.map(m=>m.processName),...t.map(m=>m.processName),...a]),c=[],u=new Set;for(const m of n)l.has(m.process_name)&&!u.has(m.process_name)&&(c.push(m),u.add(m.process_name));const _=[...e,...t];for(const m of _)u.has(m.processName)||(c.push({session_id:`inactive_${m.processName}`,display_name:m.sessionName,process_id:0,process_name:m.processName,volume:0,is_muted:!0}),u.add(m.processName));for(const m of a)if(!u.has(m)){const w=n.find(x=>x.process_name===m);w?c.push(w):c.push({session_id:`inactive_${m}`,display_name:m,process_id:0,process_name:m,volume:0,is_muted:!0}),u.add(m)}return c});gt([$t,ga],([n,e])=>n.filter(t=>!e.has(t.process_name)));function ft(n){const e={"vpilot.exe":"vPilot","couatl.exe":"GSX"},t=n.toLowerCase();if(e[t])return e[t];let a=n.replace(/\.exe$/i,"");return a=a.split(/[-_\s]/).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "),a}var fa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416zM399 239C389.6 248.4 389.6 263.6 399 272.9L446 319.9L399 366.9C389.6 376.3 389.6 391.5 399 400.8C408.4 410.1 423.6 410.2 432.9 400.8L479.9 353.8L526.9 400.8C536.3 410.2 551.5 410.2 560.8 400.8C570.1 391.4 570.2 376.2 560.8 366.9L513.8 319.9L560.8 272.9C570.2 263.5 570.2 248.3 560.8 239C551.4 229.7 536.2 229.6 526.9 239L479.9 286L432.9 239C423.5 229.6 408.3 229.6 399 239z"></path></svg>'),ha=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),ma=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),pa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416zM399 239C389.6 248.4 389.6 263.6 399 272.9L446 319.9L399 366.9C389.6 376.3 389.6 391.5 399 400.8C408.4 410.1 423.6 410.2 432.9 400.8L479.9 353.8L526.9 400.8C536.3 410.2 551.5 410.2 560.8 400.8C570.1 391.4 570.2 376.2 560.8 366.9L513.8 319.9L560.8 272.9C570.2 263.5 570.2 248.3 560.8 239C551.4 229.7 536.2 229.6 526.9 239L479.9 286L432.9 239C423.5 229.6 408.3 229.6 399 239z"></path></svg>'),_a=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"></path></svg>'),wa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416zM399 239C389.6 248.4 389.6 263.6 399 272.9L446 319.9L399 366.9C389.6 376.3 389.6 391.5 399 400.8C408.4 410.1 423.6 410.2 432.9 400.8L479.9 353.8L526.9 400.8C536.3 410.2 551.5 410.2 560.8 400.8C570.1 391.4 570.2 376.2 560.8 366.9L513.8 319.9L560.8 272.9C570.2 263.5 570.2 248.3 560.8 239C551.4 229.7 536.2 229.6 526.9 239L479.9 286L432.9 239C423.5 229.6 408.3 229.6 399 239z"></path></svg>'),Ca=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M533.6 96.5C523.3 88.1 508.2 89.7 499.8 100C491.4 110.3 493 125.4 503.3 133.8C557.5 177.8 592 244.8 592 320C592 395.2 557.5 462.2 503.3 506.3C493 514.7 491.5 529.8 499.8 540.1C508.1 550.4 523.3 551.9 533.6 543.6C598.5 490.7 640 410.2 640 320C640 229.8 598.5 149.2 533.6 96.5zM473.1 171C462.8 162.6 447.7 164.2 439.3 174.5C430.9 184.8 432.5 199.9 442.8 208.3C475.3 234.7 496 274.9 496 320C496 365.1 475.3 405.3 442.8 431.8C432.5 440.2 431 455.3 439.3 465.6C447.6 475.9 462.8 477.4 473.1 469.1C516.3 433.9 544 380.2 544 320.1C544 260 516.3 206.3 473.1 171.1zM412.6 245.5C402.3 237.1 387.2 238.7 378.8 249C370.4 259.3 372 274.4 382.3 282.8C393.1 291.6 400 305 400 320C400 335 393.1 348.4 382.3 357.3C372 365.7 370.5 380.8 378.8 391.1C387.1 401.4 402.3 402.9 412.6 394.6C434.1 376.9 448 350.1 448 320C448 289.9 434.1 263.1 412.6 245.5zM80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416z"></path></svg>'),ba=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor" aria-hidden="true"><path d="M144 416L192 416L326.1 535.2C332.5 540.9 340.7 544 349.2 544C368.4 544 384 528.4 384 509.2L384 130.8C384 111.6 368.4 96 349.2 96C340.7 96 332.5 99.1 326.1 104.8L192 224L144 224C117.5 224 96 245.5 96 272L96 368C96 394.5 117.5 416 144 416zM476.6 245.5C466.3 237.1 451.2 238.7 442.8 249C434.4 259.3 436 274.4 446.3 282.8C457.1 291.6 464 305 464 320C464 335 457.1 348.4 446.3 357.3C436 365.7 434.5 380.8 442.8 391.1C451.1 401.4 466.3 402.9 476.6 394.6C498.1 376.9 512 350.1 512 320C512 289.9 498.1 263.1 476.5 245.5z"></path></svg>'),ya=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M448 128C554 128 640 214 640 320C640 426 554 512 448 512L192 512C86 512 0 426 0 320C0 214 86 128 192 128L448 128zM192 240C178.7 240 168 250.7 168 264L168 296L136 296C122.7 296 112 306.7 112 320C112 333.3 122.7 344 136 344L168 344L168 376C168 389.3 178.7 400 192 400C205.3 400 216 389.3 216 376L216 344L248 344C261.3 344 272 333.3 272 320C272 306.7 261.3 296 248 296L216 296L216 264C216 250.7 205.3 240 192 240zM432 336C414.3 336 400 350.3 400 368C400 385.7 414.3 400 432 400C449.7 400 464 385.7 464 368C464 350.3 449.7 336 432 336zM496 240C478.3 240 464 254.3 464 272C464 289.7 478.3 304 496 304C513.7 304 528 289.7 528 272C528 254.3 513.7 240 496 240z"></path></svg>'),La=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),xa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),Ma=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M448 128C554 128 640 214 640 320C640 426 554 512 448 512L192 512C86 512 0 426 0 320C0 214 86 128 192 128L448 128zM192 240C178.7 240 168 250.7 168 264L168 296L136 296C122.7 296 112 306.7 112 320C112 333.3 122.7 344 136 344L168 344L168 376C168 389.3 178.7 400 192 400C205.3 400 216 389.3 216 376L216 344L248 344C261.3 344 272 333.3 272 320C272 306.7 261.3 296 248 296L216 296L216 264C216 250.7 205.3 240 192 240zM432 336C414.3 336 400 350.3 400 368C400 385.7 414.3 400 432 400C449.7 400 464 385.7 464 368C464 350.3 449.7 336 432 336zM496 240C478.3 240 464 254.3 464 272C464 289.7 478.3 304 496 304C513.7 304 528 289.7 528 272C528 254.3 513.7 240 496 240z"></path></svg>'),Na=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"></path></svg>'),Sa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M342.6 41.4C330.1 28.9 309.8 28.9 297.3 41.4L201.3 137.4C188.8 149.9 188.8 170.2 201.3 182.7C213.8 195.2 234.1 195.2 246.6 182.7L288 141.3L288 498.7L246.6 457.4C234.1 444.9 213.8 444.9 201.3 457.4C188.8 469.9 188.8 490.2 201.3 502.7L297.3 598.7C303.3 604.7 311.4 608.1 319.9 608.1C328.4 608.1 336.5 604.7 342.5 598.7L438.5 502.7C451 490.2 451 469.9 438.5 457.4C426 444.9 405.7 444.9 393.2 457.4L351.8 498.8L351.8 141.3L393.2 182.7C405.7 195.2 426 195.2 438.5 182.7C451 170.2 451 149.9 438.5 137.4L342.5 41.4z"></path></svg>'),Aa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M232.7 69.9L224 96L128 96C110.3 96 96 110.3 96 128C96 145.7 110.3 160 128 160L512 160C529.7 160 544 145.7 544 128C544 110.3 529.7 96 512 96L416 96L407.3 69.9C402.9 56.8 390.7 48 376.9 48L263.1 48C249.3 48 237.1 56.8 232.7 69.9zM512 208L128 208L149.1 531.1C150.7 556.4 171.7 576 197 576L443 576C468.3 576 489.3 556.4 490.9 531.1L512 208z"></path></svg>'),Ia=$("<!> <!> <!>",1),Ea=$('<div role="group"><!> <!> <!> <span class="app-name svelte-qi74x5"> </span></div>');function za(n,e){ce(e,!0);const t=xe(),a=V(()=>e.session.session_id.startsWith("inactive_")),l=V(()=>ft(e.session.process_name));var c=Ea();let u;var _=F(c);ia(_,{get volume(){return e.session.volume},get sessionId(){return e.session.session_id},get displayName(){return e.session.display_name},get disabled(){return s(a)},$$events:{dragstart:g=>t("volumedragstart",g.detail),dragmove:g=>t("volumedragmove",g.detail),dragend:g=>t("volumedragend",g.detail),trackclick:g=>t("volumetrackclick",g.detail),wheel:g=>t("volumewheel",g.detail)}});var m=X(_,2);{var w=g=>{var C=ne(),T=Q(C);{var z=v=>{pe(v,{variant:"mapping",get ariaLabel(){return`Remove mute button binding for ${e.session.display_name??""}: ${e.buttonMapping.buttonName??""}`},get title(){return`Mute Button: ${e.buttonMapping.buttonName??""}`},$$events:{remove:()=>t("removebuttonmapping",{processName:e.session.process_name})},icon:I=>{var E=fa();L(I,E)},removeIcon:I=>{var E=ha();L(I,E)},$$slots:{icon:!0,removeIcon:!0}})},N=v=>{var A=ne(),b=Q(A);{var I=B=>{pe(B,{variant:"bind",active:!0,get ariaLabel(){return`Cancel mute button binding for ${e.session.display_name??""}`},title:"Cancel Mute Binding",$$events:{cancel:()=>t("cancelbuttonbinding")},icon:S=>{var D=ma();L(S,D)},$$slots:{icon:!0}})},E=B=>{pe(B,{variant:"bind",get ariaLabel(){return`Bind hardware button to mute ${e.session.display_name??""}`},title:"Bind Mute Button",$$events:{startbind:()=>t("startbuttonbinding",{session:e.session})},icon:D=>{var j=pa();L(D,j)},hoverIcon:D=>{var j=_a();L(D,j)},$$slots:{icon:!0,hoverIcon:!0}})};J(b,B=>{e.isBindingButton?B(I):B(E,!1)},!0)}L(v,A)};J(T,v=>{e.buttonMapping?v(z):v(N,!1)})}L(g,C)},x=g=>{{const C=A=>{var b=ne(),I=Q(b);{var E=O=>{var S=wa();L(O,S)},B=O=>{var S=ne(),D=Q(S);{var j=q=>{var de=Ca();L(q,de)},ee=q=>{var de=ba();L(q,de)};J(D,q=>{e.session.volume===1?q(j):q(ee,!1)},!0)}L(O,S)};J(I,O=>{e.session.is_muted||e.session.volume===0?O(E):O(B,!1)})}L(A,b)};let T=V(()=>!e.session.is_muted),z=V(()=>e.session.is_muted?"Unmute":"Mute"),N=V(()=>e.session.display_name),v=V(()=>e.session.is_muted?"Unmute":"Mute");pe(g,{variant:"toggle",get active(){return s(T)},get disabled(){return s(a)},get ariaLabel(){return`${s(z)??""} ${s(N)??""}`},get title(){return s(v)},$$events:{toggle:()=>t("mutetoggle",{sessionId:e.session.session_id,muted:!e.session.is_muted})},icon:C,$$slots:{icon:!0}})}};J(m,g=>{e.isEditMode?g(w):g(x,!1)})}var k=X(m,2);{var p=g=>{var C=Ia(),T=Q(C);{var z=b=>{pe(b,{variant:"mapping",get ariaLabel(){return`Remove volume axis binding for ${e.session.display_name??""}: ${e.axisMapping.axisName??""}`},get title(){return`Volume Axis: ${e.axisMapping.axisName??""}`},$$events:{remove:()=>t("removeaxismapping",{processName:e.session.process_name})},icon:B=>{var O=ya();L(B,O)},removeIcon:B=>{var O=La();L(B,O)},$$slots:{icon:!0,removeIcon:!0}})},N=b=>{var I=ne(),E=Q(I);{var B=S=>{pe(S,{variant:"bind",active:!0,get ariaLabel(){return`Cancel axis binding for ${e.session.display_name??""}`},title:"Cancel Axis Binding",$$events:{cancel:()=>t("cancelaxisbinding")},icon:j=>{var ee=xa();L(j,ee)},$$slots:{icon:!0}})},O=S=>{pe(S,{variant:"bind",get ariaLabel(){return`Bind hardware axis to control volume for ${e.session.display_name??""}`},title:"Bind Volume Axis",$$events:{startbind:()=>t("startaxisbinding",{session:e.session})},icon:ee=>{var q=Ma();L(ee,q)},hoverIcon:ee=>{var q=Na();L(ee,q)},$$slots:{icon:!0,hoverIcon:!0}})};J(E,S=>{e.isBindingAxis?S(B):S(O,!1)},!0)}L(b,I)};J(T,b=>{e.axisMapping?b(z):b(N,!1)})}var v=X(T,2);{const b=S=>{var D=Sa();L(S,D)};let I=V(()=>{var S;return((S=e.axisMapping)==null?void 0:S.inverted)??!1}),E=V(()=>!e.axisMapping),B=V(()=>e.axisMapping?`${e.axisMapping.inverted?"Disable":"Enable"} axis inversion for ${e.session.display_name}`:`No axis binding for ${e.session.display_name}`),O=V(()=>e.axisMapping?"Reverse Axis Direction":"Bind an axis to enable inversion");pe(v,{variant:"toggle",get active(){return s(I)},get disabled(){return s(E)},get ariaLabel(){return s(B)},get title(){return s(O)},$$events:{toggle:()=>t("toggleinversion",{processName:e.session.process_name})},icon:b,$$slots:{icon:!0}})}var A=X(v,2);pe(A,{variant:"action",danger:!0,get ariaLabel(){return`Remove ${e.session.display_name??""} from mixer`},title:"Remove Application",$$events:{click:()=>t("removeapplication",{processName:e.session.process_name})},icon:I=>{var E=Aa();L(I,E)},$$slots:{icon:!0}}),L(g,C)};J(k,g=>{e.isEditMode&&g(p)})}var P=X(k,2),M=F(P,!0);H(P),H(c),me(g=>{u=he(c,1,"application-channel svelte-qi74x5",null,u,g),Y(c,"aria-label",`Audio controls for ${e.session.display_name??""}`),Y(P,"title",e.session.display_name),Se(M,s(l))},[()=>({"has-mapping":!!e.axisMapping||!!e.buttonMapping,inactive:s(a),"inactive-edit-mode":s(a)&&e.isEditMode})]),L(n,c),ue()}function Ba(n,e){e(!e())}var ka=$('<div class="add-app-list svelte-1brxiw9" role="listbox"><!></div>'),Da=ie('<svg class="add-app-icon svelte-1brxiw9" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="24" height="24" fill="currentColor" aria-hidden="true"><path d="M352 128C352 110.3 337.7 96 320 96C302.3 96 288 110.3 288 128L288 288L128 288C110.3 288 96 302.3 96 320C96 337.7 110.3 352 128 352L288 352L288 512C288 529.7 302.3 544 320 544C337.7 544 352 529.7 352 512L352 352L512 352C529.7 352 544 337.7 544 320C544 302.3 529.7 288 512 288L352 288L352 128z"></path></svg>'),Pa=$('<div><!> <button class="btn-add-app svelte-1brxiw9"><!></button></div>');function dt(n,e){ce(e,!0);let t=G(e,"expanded",15),a=G(e,"disabled",3,!1),l=G(e,"variant",3,"default"),c=G(e,"anchor",3,"left"),u=G(e,"onboarding",3,!1),_=G(e,"class",3,"");var m=Pa();let w;var x=F(m);{var k=C=>{var T=ka(),z=F(T);ye(z,()=>e.children),H(T),L(C,T)};J(x,C=>{t()&&e.children&&C(k)})}var p=X(x,2);p.__click=[Ba,t];var P=F(p);{var M=C=>{var T=ne(),z=Q(T);ye(z,()=>e.expandedIcon),L(C,T)},g=C=>{var T=ne(),z=Q(T);{var N=A=>{var b=ne(),I=Q(b);ye(I,()=>e.icon),L(A,b)},v=A=>{var b=Da();L(A,b)};J(z,A=>{e.icon?A(N):A(v,!1)},!0)}L(C,T)};J(P,C=>{t()&&e.expandedIcon?C(M):C(g,!1)})}H(p),H(m),me(C=>{w=he(m,1,`btn-add-app-container ${l()??""} anchor-${c()??""} ${_()??""}`,"svelte-1brxiw9",w,C),p.disabled=a(),Y(p,"aria-label",e.ariaLabel),Y(p,"title",e.title),Y(p,"aria-expanded",t())},[()=>({expanded:t(),onboarding:u()})]),L(n,m),ue()}Ce(["click"]);function Ta(n,e){ce(e,!0);let t=G(e,"expanded",15),a=G(e,"onboarding",3,!1);const l=xe();function c(u){u.detail.processName&&l("select",{processName:u.detail.processName})}{const u=x=>{var k=ne(),p=Q(k);Kt(p,17,()=>e.availableSessions,Fi,(P,M,g)=>{{let C=V(()=>ft(s(M).process_name));ut(P,{get processName(){return s(M).process_name},get displayName(){return s(C)},animationIndex:g,$$events:{select:c}})}}),L(x,k)};let _=V(()=>e.availableSessions.length===0),m=V(()=>e.availableSessions.length>0?t()?"Close application list":"Add application":"No applications available"),w=V(()=>e.availableSessions.length>0?t()?"Close":"Add Application":"No applications available");dt(n,{get onboarding(){return a()},get disabled(){return s(_)},get ariaLabel(){return s(m)},get title(){return s(w)},get expanded(){return t()},set expanded(x){t(x)},children:u,$$slots:{default:!0}})}ue()}var Ra=(n,e)=>e("cancelbuttonbinding"),Oa=(n,e)=>e("cancelaxisbinding"),Wa=$('<div class="application-channel add-app-column svelte-1n6eph8" role="group"><span class="app-name inactive svelte-1n6eph8"> </span> <div class="volume-bar-container svelte-1n6eph8"><input type="range" class="volume-slider svelte-1n6eph8" min="0" max="1" step="0.01" style="--volume-percent: 50%" disabled/></div> <button class="btn btn-channel btn-disabled svelte-1n6eph8" aria-label="Cancel mute binding" title="Cancel Mute Binding" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg></button> <button class="btn btn-channel btn-disabled svelte-1n6eph8" aria-label="Cancel axis binding" title="Cancel Axis Binding" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="20" height="20" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg></button></div>'),Va=$('<div class="mixer-container svelte-1n6eph8"><!> <!></div>');function Fa(n,e){ce(e,!0);let t=G(e,"addAppListExpanded",15),a=V(()=>e.boundSessions.length===0);const l=xe(),c=V(()=>e.isBindingMode&&e.pendingBinding!==null&&!e.boundSessions.some(w=>{var x;return w.process_name===((x=e.pendingBinding)==null?void 0:x.processName)}));var u=ne(),_=Q(u);{var m=w=>{var x=Va(),k=F(x);Kt(k,17,()=>e.boundSessions,M=>M.session_id,(M,g)=>{const C=V(()=>e.axisMappings.find(z=>z.processName===s(g).process_name)),T=V(()=>e.buttonMappings.find(z=>z.processName===s(g).process_name));{let z=V(()=>{var v;return e.isBindingMode&&((v=e.pendingBinding)==null?void 0:v.sessionId)===s(g).session_id}),N=V(()=>{var v;return e.isButtonBindingMode&&((v=e.pendingButtonBinding)==null?void 0:v.sessionId)===s(g).session_id});za(M,{get session(){return s(g)},get axisMapping(){return s(C)},get buttonMapping(){return s(T)},get isEditMode(){return e.isEditMode},get isBindingAxis(){return s(z)},get isBindingButton(){return s(N)},$$events:{volumedragstart(v){ae.call(this,e,v)},volumedragmove(v){ae.call(this,e,v)},volumedragend(v){ae.call(this,e,v)},volumetrackclick(v){ae.call(this,e,v)},volumewheel(v){ae.call(this,e,v)},mutetoggle(v){ae.call(this,e,v)},startaxisbinding(v){ae.call(this,e,v)},startbuttonbinding(v){ae.call(this,e,v)},cancelaxisbinding(v){ae.call(this,e,v)},cancelbuttonbinding(v){ae.call(this,e,v)},removeaxismapping(v){ae.call(this,e,v)},removebuttonmapping(v){ae.call(this,e,v)},toggleinversion(v){ae.call(this,e,v)},removeapplication(v){ae.call(this,e,v)}}})}});var p=X(k,2);{var P=M=>{var g=ne(),C=Q(g);{var T=N=>{var v=Wa(),A=F(v),b=F(A,!0);H(A);var I=X(A,2),E=F(I);Zt(E),jt(E,.5),H(I);var B=X(I,2);B.__click=[Ra,l];var O=X(B,2);O.__click=[Oa,l],H(v),me(S=>{Y(v,"aria-label",`Binding in progress for ${e.pendingBinding.sessionName??""}`),Se(b,S)},[()=>ft(e.pendingBinding.processName)]),L(N,v)},z=N=>{var v=ne(),A=Q(v);Vi(A,()=>e.addAppComponentKey,b=>{Ta(b,{get availableSessions(){return e.availableSessions},get onboarding(){return s(a)},get expanded(){return t()},set expanded(I){t(I)},$$events:{select(I){ae.call(this,e,I)}}})}),L(N,v)};J(C,N=>{s(c)&&e.pendingBinding?N(T):N(z,!1)})}L(M,g)};J(p,M=>{e.isEditMode&&M(P)})}H(x),L(w,x)};J(_,w=>{(e.boundSessions.length>0||e.isEditMode)&&w(m)})}L(n,u),ue()}Ce(["click"]);class an{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.width=e[0].Logical.width,this.height=e[0].Logical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toPhysical(e){return new De(this.width*e,this.height*e)}[oe](){return{width:this.width,height:this.height}}toJSON(){return this[oe]()}}class De{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.width=e[0].Physical.width,this.height=e[0].Physical.height):(this.width=e[0].width,this.height=e[0].height):(this.width=e[0],this.height=e[1])}toLogical(e){return new an(this.width/e,this.height/e)}[oe](){return{width:this.width,height:this.height}}toJSON(){return this[oe]()}}class Me{constructor(e){this.size=e}toLogical(e){return this.size instanceof an?this.size:this.size.toLogical(e)}toPhysical(e){return this.size instanceof De?this.size:this.size.toPhysical(e)}[oe](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[oe]()}}class sn{constructor(...e){this.type="Logical",e.length===1?"Logical"in e[0]?(this.x=e[0].Logical.x,this.y=e[0].Logical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toPhysical(e){return new be(this.x*e,this.y*e)}[oe](){return{x:this.x,y:this.y}}toJSON(){return this[oe]()}}class be{constructor(...e){this.type="Physical",e.length===1?"Physical"in e[0]?(this.x=e[0].Physical.x,this.y=e[0].Physical.y):(this.x=e[0].x,this.y=e[0].y):(this.x=e[0],this.y=e[1])}toLogical(e){return new sn(this.x/e,this.y/e)}[oe](){return{x:this.x,y:this.y}}toJSON(){return this[oe]()}}class Qe{constructor(e){this.position=e}toLogical(e){return this.position instanceof sn?this.position:this.position.toLogical(e)}toPhysical(e){return this.position instanceof be?this.position:this.position.toPhysical(e)}[oe](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[oe]()}}var le;(function(n){n.WINDOW_RESIZED="tauri://resize",n.WINDOW_MOVED="tauri://move",n.WINDOW_CLOSE_REQUESTED="tauri://close-requested",n.WINDOW_DESTROYED="tauri://destroyed",n.WINDOW_FOCUS="tauri://focus",n.WINDOW_BLUR="tauri://blur",n.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",n.WINDOW_THEME_CHANGED="tauri://theme-changed",n.WINDOW_CREATED="tauri://window-created",n.WEBVIEW_CREATED="tauri://webview-created",n.DRAG_ENTER="tauri://drag-enter",n.DRAG_OVER="tauri://drag-over",n.DRAG_DROP="tauri://drag-drop",n.DRAG_LEAVE="tauri://drag-leave"})(le||(le={}));async function rn(n,e){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(n,e),await d("plugin:event|unlisten",{event:n,eventId:e})}async function ln(n,e,t){var a;const l=typeof(t==null?void 0:t.target)=="string"?{kind:"AnyLabel",label:t.target}:(a=t==null?void 0:t.target)!==null&&a!==void 0?a:{kind:"Any"};return d("plugin:event|listen",{event:n,target:l,handler:ji(e)}).then(c=>async()=>rn(n,c))}async function Ha(n,e,t){return ln(n,a=>{rn(n,a.id),e(a)},t)}async function Ua(n,e){await d("plugin:event|emit",{event:n,payload:e})}async function Ga(n,e,t){await d("plugin:event|emit_to",{target:typeof n=="string"?{kind:"AnyLabel",label:n}:n,event:e,payload:t})}class Pe extends Xi{constructor(e){super(e)}static async new(e,t,a){return d("plugin:image|new",{rgba:Xe(e),width:t,height:a}).then(l=>new Pe(l))}static async fromBytes(e){return d("plugin:image|from_bytes",{bytes:Xe(e)}).then(t=>new Pe(t))}static async fromPath(e){return d("plugin:image|from_path",{path:e}).then(t=>new Pe(t))}async rgba(){return d("plugin:image|rgba",{rid:this.rid}).then(e=>new Uint8Array(e))}async size(){return d("plugin:image|size",{rid:this.rid})}}function Xe(n){return n==null?null:typeof n=="string"?n:n instanceof Pe?n.rid:n}var vt;(function(n){n[n.Critical=1]="Critical",n[n.Informational=2]="Informational"})(vt||(vt={}));class qa{constructor(e){this._preventDefault=!1,this.event=e.event,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var Bt;(function(n){n.None="none",n.Normal="normal",n.Indeterminate="indeterminate",n.Paused="paused",n.Error="error"})(Bt||(Bt={}));function Ja(){return new ht(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function lt(){return d("plugin:window|get_all_windows").then(n=>n.map(e=>new ht(e,{skip:!0})))}const ot=["tauri://created","tauri://error"];class ht{constructor(e,t={}){var a;this.label=e,this.listeners=Object.create(null),t!=null&&t.skip||d("plugin:window|create",{options:{...t,parent:typeof t.parent=="string"?t.parent:(a=t.parent)===null||a===void 0?void 0:a.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async l=>this.emit("tauri://error",l))}static async getByLabel(e){var t;return(t=(await lt()).find(a=>a.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return Ja()}static async getAll(){return lt()}static async getFocusedWindow(){for(const e of await lt())if(await e.isFocused())return e;return null}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const a=this.listeners[e];a.splice(a.indexOf(t),1)}:ln(e,t,{target:{kind:"Window",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const a=this.listeners[e];a.splice(a.indexOf(t),1)}:Ha(e,t,{target:{kind:"Window",label:this.label}})}async emit(e,t){if(ot.includes(e)){for(const a of this.listeners[e]||[])a({event:e,id:-1,payload:t});return}return Ua(e,t)}async emitTo(e,t,a){if(ot.includes(t)){for(const l of this.listeners[t]||[])l({event:t,id:-1,payload:a});return}return Ga(e,t,a)}_handleTauriEvent(e,t){return ot.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async scaleFactor(){return d("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return d("plugin:window|inner_position",{label:this.label}).then(e=>new be(e))}async outerPosition(){return d("plugin:window|outer_position",{label:this.label}).then(e=>new be(e))}async innerSize(){return d("plugin:window|inner_size",{label:this.label}).then(e=>new De(e))}async outerSize(){return d("plugin:window|outer_size",{label:this.label}).then(e=>new De(e))}async isFullscreen(){return d("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return d("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return d("plugin:window|is_maximized",{label:this.label})}async isFocused(){return d("plugin:window|is_focused",{label:this.label})}async isDecorated(){return d("plugin:window|is_decorated",{label:this.label})}async isResizable(){return d("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return d("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return d("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return d("plugin:window|is_closable",{label:this.label})}async isVisible(){return d("plugin:window|is_visible",{label:this.label})}async title(){return d("plugin:window|title",{label:this.label})}async theme(){return d("plugin:window|theme",{label:this.label})}async isAlwaysOnTop(){return d("plugin:window|is_always_on_top",{label:this.label})}async center(){return d("plugin:window|center",{label:this.label})}async requestUserAttention(e){let t=null;return e&&(e===vt.Critical?t={type:"Critical"}:t={type:"Informational"}),d("plugin:window|request_user_attention",{label:this.label,value:t})}async setResizable(e){return d("plugin:window|set_resizable",{label:this.label,value:e})}async setEnabled(e){return d("plugin:window|set_enabled",{label:this.label,value:e})}async isEnabled(){return d("plugin:window|is_enabled",{label:this.label})}async setMaximizable(e){return d("plugin:window|set_maximizable",{label:this.label,value:e})}async setMinimizable(e){return d("plugin:window|set_minimizable",{label:this.label,value:e})}async setClosable(e){return d("plugin:window|set_closable",{label:this.label,value:e})}async setTitle(e){return d("plugin:window|set_title",{label:this.label,value:e})}async maximize(){return d("plugin:window|maximize",{label:this.label})}async unmaximize(){return d("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return d("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return d("plugin:window|minimize",{label:this.label})}async unminimize(){return d("plugin:window|unminimize",{label:this.label})}async show(){return d("plugin:window|show",{label:this.label})}async hide(){return d("plugin:window|hide",{label:this.label})}async close(){return d("plugin:window|close",{label:this.label})}async destroy(){return d("plugin:window|destroy",{label:this.label})}async setDecorations(e){return d("plugin:window|set_decorations",{label:this.label,value:e})}async setShadow(e){return d("plugin:window|set_shadow",{label:this.label,value:e})}async setEffects(e){return d("plugin:window|set_effects",{label:this.label,value:e})}async clearEffects(){return d("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(e){return d("plugin:window|set_always_on_top",{label:this.label,value:e})}async setAlwaysOnBottom(e){return d("plugin:window|set_always_on_bottom",{label:this.label,value:e})}async setContentProtected(e){return d("plugin:window|set_content_protected",{label:this.label,value:e})}async setSize(e){return d("plugin:window|set_size",{label:this.label,value:e instanceof Me?e:new Me(e)})}async setMinSize(e){return d("plugin:window|set_min_size",{label:this.label,value:e instanceof Me?e:e?new Me(e):null})}async setMaxSize(e){return d("plugin:window|set_max_size",{label:this.label,value:e instanceof Me?e:e?new Me(e):null})}async setSizeConstraints(e){function t(a){return a?{Logical:a}:null}return d("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:t(e==null?void 0:e.minWidth),minHeight:t(e==null?void 0:e.minHeight),maxWidth:t(e==null?void 0:e.maxWidth),maxHeight:t(e==null?void 0:e.maxHeight)}})}async setPosition(e){return d("plugin:window|set_position",{label:this.label,value:e instanceof Qe?e:new Qe(e)})}async setFullscreen(e){return d("plugin:window|set_fullscreen",{label:this.label,value:e})}async setSimpleFullscreen(e){return d("plugin:window|set_simple_fullscreen",{label:this.label,value:e})}async setFocus(){return d("plugin:window|set_focus",{label:this.label})}async setFocusable(e){return d("plugin:window|set_focusable",{label:this.label,value:e})}async setIcon(e){return d("plugin:window|set_icon",{label:this.label,value:Xe(e)})}async setSkipTaskbar(e){return d("plugin:window|set_skip_taskbar",{label:this.label,value:e})}async setCursorGrab(e){return d("plugin:window|set_cursor_grab",{label:this.label,value:e})}async setCursorVisible(e){return d("plugin:window|set_cursor_visible",{label:this.label,value:e})}async setCursorIcon(e){return d("plugin:window|set_cursor_icon",{label:this.label,value:e})}async setBackgroundColor(e){return d("plugin:window|set_background_color",{color:e})}async setCursorPosition(e){return d("plugin:window|set_cursor_position",{label:this.label,value:e instanceof Qe?e:new Qe(e)})}async setIgnoreCursorEvents(e){return d("plugin:window|set_ignore_cursor_events",{label:this.label,value:e})}async startDragging(){return d("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(e){return d("plugin:window|start_resize_dragging",{label:this.label,value:e})}async setBadgeCount(e){return d("plugin:window|set_badge_count",{label:this.label,value:e})}async setBadgeLabel(e){return d("plugin:window|set_badge_label",{label:this.label,value:e})}async setOverlayIcon(e){return d("plugin:window|set_overlay_icon",{label:this.label,value:e?Xe(e):void 0})}async setProgressBar(e){return d("plugin:window|set_progress_bar",{label:this.label,value:e})}async setVisibleOnAllWorkspaces(e){return d("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:e})}async setTitleBarStyle(e){return d("plugin:window|set_title_bar_style",{label:this.label,value:e})}async setTheme(e){return d("plugin:window|set_theme",{label:this.label,value:e})}async onResized(e){return this.listen(le.WINDOW_RESIZED,t=>{t.payload=new De(t.payload),e(t)})}async onMoved(e){return this.listen(le.WINDOW_MOVED,t=>{t.payload=new be(t.payload),e(t)})}async onCloseRequested(e){return this.listen(le.WINDOW_CLOSE_REQUESTED,async t=>{const a=new qa(t);await e(a),a.isPreventDefault()||await this.destroy()})}async onDragDropEvent(e){const t=await this.listen(le.DRAG_ENTER,u=>{e({...u,payload:{type:"enter",paths:u.payload.paths,position:new be(u.payload.position)}})}),a=await this.listen(le.DRAG_OVER,u=>{e({...u,payload:{type:"over",position:new be(u.payload.position)}})}),l=await this.listen(le.DRAG_DROP,u=>{e({...u,payload:{type:"drop",paths:u.payload.paths,position:new be(u.payload.position)}})}),c=await this.listen(le.DRAG_LEAVE,u=>{e({...u,payload:{type:"leave"}})});return()=>{t(),l(),a(),c()}}async onFocusChanged(e){const t=await this.listen(le.WINDOW_FOCUS,l=>{e({...l,payload:!0})}),a=await this.listen(le.WINDOW_BLUR,l=>{e({...l,payload:!1})});return()=>{t(),a()}}async onScaleChanged(e){return this.listen(le.WINDOW_SCALE_FACTOR_CHANGED,e)}async onThemeChanged(e){return this.listen(le.WINDOW_THEME_CHANGED,e)}}var kt;(function(n){n.Disabled="disabled",n.Throttle="throttle",n.Suspend="suspend"})(kt||(kt={}));var Dt;(function(n){n.Default="default",n.FluentOverlay="fluentOverlay"})(Dt||(Dt={}));var Pt;(function(n){n.AppearanceBased="appearanceBased",n.Light="light",n.Dark="dark",n.MediumLight="mediumLight",n.UltraDark="ultraDark",n.Titlebar="titlebar",n.Selection="selection",n.Menu="menu",n.Popover="popover",n.Sidebar="sidebar",n.HeaderView="headerView",n.Sheet="sheet",n.WindowBackground="windowBackground",n.HudWindow="hudWindow",n.FullScreenUI="fullScreenUI",n.Tooltip="tooltip",n.ContentBackground="contentBackground",n.UnderWindowBackground="underWindowBackground",n.UnderPageBackground="underPageBackground",n.Mica="mica",n.Blur="blur",n.Acrylic="acrylic",n.Tabbed="tabbed",n.TabbedDark="tabbedDark",n.TabbedLight="tabbedLight"})(Pt||(Pt={}));var Tt;(function(n){n.FollowsWindowActiveState="followsWindowActiveState",n.Active="active",n.Inactive="inactive"})(Tt||(Tt={}));function Ka(n,e){n.relatedTarget!==null&&e(!0)}function Qa(n,e,t,a,l){const c=n.relatedTarget;s(e)&&c&&s(e).contains(c)||t()||a()||l(!1)}async function Ya(n){n.preventDefault(),await d("open_url",{url:"https://github.com/CameronCarlyon/ClearComms/blob/main/GUIDE.md"})}async function Za(n){n.preventDefault(),await d("open_url",{url:"https://github.com/CameronCarlyon/ClearComms"})}async function ja(n,e){n.preventDefault(),e("togglewindowpinned")}var Xa=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="24" height="24" fill="currentColor"><path d="M259.1 73.5C262.1 58.7 275.2 48 290.4 48L350.2 48C365.4 48 378.5 58.7 381.5 73.5L396 143.5C410.1 149.5 423.3 157.2 435.3 166.3L503.1 143.8C517.5 139 533.3 145 540.9 158.2L570.8 210C578.4 223.2 575.7 239.8 564.3 249.9L511 297.3C511.9 304.7 512.3 312.3 512.3 320C512.3 327.7 511.8 335.3 511 342.7L564.4 390.2C575.8 400.3 578.4 417 570.9 430.1L541 481.9C533.4 495 517.6 501.1 503.2 496.3L435.4 473.8C423.3 482.9 410.1 490.5 396.1 496.6L381.7 566.5C378.6 581.4 365.5 592 350.4 592L290.6 592C275.4 592 262.3 581.3 259.3 566.5L244.9 496.6C230.8 490.6 217.7 482.9 205.6 473.8L137.5 496.3C123.1 501.1 107.3 495.1 99.7 481.9L69.8 430.1C62.2 416.9 64.9 400.3 76.3 390.2L129.7 342.7C128.8 335.3 128.4 327.7 128.4 320C128.4 312.3 128.9 304.7 129.7 297.3L76.3 249.8C64.9 239.7 62.3 223 69.8 209.9L99.7 158.1C107.3 144.9 123.1 138.9 137.5 143.7L205.3 166.2C217.4 157.1 230.6 149.5 244.6 143.4L259.1 73.5zM320.3 400C364.5 399.8 400.2 363.9 400 319.7C399.8 275.5 363.9 239.8 319.7 240C275.5 240.2 239.8 276.1 240 320.3C240.2 364.5 276.1 400.2 320.3 400z"></path></svg>'),$a=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="24" height="24" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),es=$('<div class="settings-container svelte-1gh4iio"><button class="settings-icon-button svelte-1gh4iio" aria-label="View ClearComms guide (opens in external browser)" title="User Guide" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="25" height="25" fill="currentColor" aria-hidden="true"><path d="M224 224C224 171 267 128 320 128C373 128 416 171 416 224C416 266.7 388.1 302.9 349.5 315.4C321.1 324.6 288 350.7 288 392L288 416C288 433.7 302.3 448 320 448C337.7 448 352 433.7 352 416L352 392C352 390.3 352.6 387.9 355.5 384.7C358.5 381.4 363.4 378.2 369.2 376.3C433.5 355.6 480 295.3 480 224C480 135.6 408.4 64 320 64C231.6 64 160 135.6 160 224C160 241.7 174.3 256 192 256C209.7 256 224 241.7 224 224zM320 576C342.1 576 360 558.1 360 536C360 513.9 342.1 496 320 496C297.9 496 280 513.9 280 536C280 558.1 297.9 576 320 576z"></path></svg></button> <button class="settings-icon-button svelte-1gh4iio" aria-label="Visit ClearComms repository on GitHub (opens in external browser)" title="GitHub Repository" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="35" height="35" fill="currentColor" aria-hidden="true"><path d="M237.9 461.4C237.9 463.4 235.6 465 232.7 465C229.4 465.3 227.1 463.7 227.1 461.4C227.1 459.4 229.4 457.8 232.3 457.8C235.3 457.5 237.9 459.1 237.9 461.4zM206.8 456.9C206.1 458.9 208.1 461.2 211.1 461.8C213.7 462.8 216.7 461.8 217.3 459.8C217.9 457.8 216 455.5 213 454.6C210.4 453.9 207.5 454.9 206.8 456.9zM251 455.2C248.1 455.9 246.1 457.8 246.4 460.1C246.7 462.1 249.3 463.4 252.3 462.7C255.2 462 257.2 460.1 256.9 458.1C256.6 456.2 253.9 454.9 251 455.2zM316.8 72C178.1 72 72 177.3 72 316C72 426.9 141.8 521.8 241.5 555.2C254.3 557.5 258.8 549.6 258.8 543.1C258.8 536.9 258.5 502.7 258.5 481.7C258.5 481.7 188.5 496.7 173.8 451.9C173.8 451.9 162.4 422.8 146 415.3C146 415.3 123.1 399.6 147.6 399.9C147.6 399.9 172.5 401.9 186.2 425.7C208.1 464.3 244.8 453.2 259.1 446.6C261.4 430.6 267.9 419.5 275.1 412.9C219.2 406.7 162.8 398.6 162.8 302.4C162.8 274.9 170.4 261.1 186.4 243.5C183.8 237 175.3 210.2 189 175.6C209.9 169.1 258 202.6 258 202.6C278 197 299.5 194.1 320.8 194.1C342.1 194.1 363.6 197 383.6 202.6C383.6 202.6 431.7 169 452.6 175.6C466.3 210.3 457.8 237 455.2 243.5C471.2 261.2 481 275 481 302.4C481 398.9 422.1 406.6 366.2 412.9C375.4 420.8 383.2 435.8 383.2 459.3C383.2 493 382.9 534.7 382.9 542.9C382.9 549.4 387.5 557.3 400.2 555C500.2 521.8 568 426.9 568 316C568 177.3 455.5 72 316.8 72zM169.2 416.9C167.9 417.9 168.2 420.2 169.9 422.1C171.5 423.7 173.8 424.4 175.1 423.1C176.4 422.1 176.1 419.8 174.4 417.9C172.8 416.3 170.5 415.6 169.2 416.9zM158.4 408.8C157.7 410.1 158.7 411.7 160.7 412.7C162.3 413.7 164.3 413.4 165 412C165.7 410.7 164.7 409.1 162.7 408.1C160.7 407.5 159.1 407.8 158.4 408.8zM190.8 444.4C189.2 445.7 189.8 448.7 192.1 450.6C194.4 452.9 197.3 453.2 198.6 451.6C199.9 450.3 199.3 447.3 197.3 445.4C195.1 443.1 192.1 442.8 190.8 444.4zM179.4 429.7C177.8 430.7 177.8 433.3 179.4 435.6C181 437.9 183.7 438.9 185 437.9C186.6 436.6 186.6 434 185 431.7C183.6 429.4 181 428.4 179.4 429.7z"></path></svg></button> <button class="settings-icon-button svelte-1gh4iio" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="25" height="25" stroke-width="65" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M160 96C160 78.3 174.3 64 192 64L448 64C465.7 64 480 78.3 480 96C480 113.7 465.7 128 448 128L418.5 128L428.8 262.1C465.9 283.3 494.6 318.5 507 361.8L510.8 375.2C513.6 384.9 511.6 395.2 505.6 403.3C499.6 411.4 490 416 480 416L160 416C150 416 140.5 411.3 134.5 403.3C128.5 395.3 126.5 384.9 129.3 375.2L133 361.8C145.4 318.5 174 283.3 211.2 262.1L221.5 128L192 128C174.3 128 160 113.7 160 96zM288 464L352 464L352 576C352 593.7 337.7 608 320 608C302.3 608 288 593.7 288 576L288 464z"></path></svg></button></div>'),ts=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="24" height="24" fill="currentColor"><path d="M416.9 85.2L372 130.1L509.9 268L554.8 223.1C568.4 209.6 576 191.2 576 172C576 152.8 568.4 134.4 554.8 120.9L519.1 85.2C505.6 71.6 487.2 64 468 64C448.8 64 430.4 71.6 416.9 85.2zM338.1 164L122.9 379.1C112.2 389.8 104.4 403.2 100.3 417.8L64.9 545.6C62.6 553.9 64.9 562.9 71.1 569C77.3 575.1 86.2 577.5 94.5 575.2L222.3 539.7C236.9 535.6 250.2 527.9 261 517.1L476 301.9L338.1 164z"></path></svg>'),ns=ie('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="24" height="24" fill="currentColor"><path d="M183.1 137.4C170.6 124.9 150.3 124.9 137.8 137.4C125.3 149.9 125.3 170.2 137.8 182.7L275.2 320L137.9 457.4C125.4 469.9 125.4 490.2 137.9 502.7C150.4 515.2 170.7 515.2 183.2 502.7L320.5 365.3L457.9 502.6C470.4 515.1 490.7 515.1 503.2 502.6C515.7 490.1 515.7 469.8 503.2 457.3L365.8 320L503.1 182.6C515.6 170.1 515.6 149.8 503.1 137.3C490.6 124.8 470.3 124.8 457.8 137.3L320.5 274.7L183.1 137.4z"></path></svg>'),is=$('<span style="font-size: 0.875rem;">Return</span>'),as=$("<!> <!>",1),ss=$('<div role="region" aria-label="Application controls"><div><div><!></div> <div><!></div> <div><!></div></div></div>');function rs(n,e){ce(e,!0);let t=G(e,"dockOpen",15),a=G(e,"settingsMenuExpanded",15),l=G(e,"closeMenuExpanded",15);const c=xe();Le(()=>{a()&&l()&&l(!1)}),Le(()=>{l()&&a()&&a(!1)}),Le(()=>{t()||(a(!1),l(!1))});let u=U(null);async function _(){await d("quit_application")}async function m(){l(!1),a(!1),t(!1),await ht.getCurrent().hide()}var w=ss();let x;w.__focusin=[Ka,t],w.__focusout=[Qa,u,a,l,t];var k=F(w);let p;var P=F(k);let M;var g=F(P);{const b=S=>{var D=Xa();L(S,D)},I=S=>{var D=$a();L(S,D)},E=S=>{var D=es(),j=F(D);j.__click=[Ya];var ee=X(j,2);ee.__click=[Za];var q=X(ee,2);q.__click=[ja,c];var de=F(q);H(q),H(D),me(()=>{Y(q,"aria-label",e.windowPinned?"Disable pin on top":"Enable pin on top"),Y(q,"aria-pressed",e.windowPinned),Y(q,"title",e.windowPinned?"Pinned on Top":"Pin on Top"),Y(de,"fill",e.windowPinned?"currentColor":"none"),Y(de,"stroke",e.windowPinned?"none":"currentColor")}),L(S,D)};let B=V(()=>a()?"Close settings menu":"Open settings menu"),O=V(()=>a()?"Close":"Menu");dt(g,{anchor:"left",get ariaLabel(){return s(B)},get title(){return s(O)},get expanded(){return a()},set expanded(S){a(S)},icon:b,expandedIcon:I,children:E,$$slots:{icon:!0,expandedIcon:!0,default:!0}})}H(P);var C=X(P,2);let T;var z=F(C);{const b=O=>{var S=ts();L(O,S)};let I=V(()=>!e.audioInitialised),E=V(()=>e.isEditMode?"Exit edit mode":"Enter edit mode to configure bindings"),B=V(()=>e.isEditMode?"Exit Edit Mode":"Edit Bindings");pe(z,{variant:"toggle",get active(){return e.isEditMode},get disabled(){return s(I)},get ariaLabel(){return s(E)},get title(){return s(B)},$$events:{toggle:()=>c("toggleeditmode")},icon:b,$$slots:{icon:!0}})}H(C);var N=X(C,2);let v;var A=F(N);{const b=S=>{var D=ns();L(S,D)},I=S=>{var D=is();L(S,D)},E=S=>{var D=as(),j=Q(D);ut(j,{displayName:"Quit",danger:!0,fullWidth:!0,ariaLabel:"Quit the application",$$events:{select:_}});var ee=X(j,2);ut(ee,{displayName:"Minimise",fullWidth:!0,ariaLabel:"Minimise the application",$$events:{select:m}}),L(S,D)};let B=V(()=>l()?"Cancel":"Close application"),O=V(()=>l()?"Cancel":"Quit");dt(A,{anchor:"right",get ariaLabel(){return s(B)},get title(){return s(O)},get expanded(){return l()},set expanded(S){l(S)},icon:b,expandedIcon:I,children:E,$$slots:{icon:!0,expandedIcon:!0,default:!0}})}H(N),H(k),H(w),Ri(w,b=>f(u,b),()=>s(u)),me((b,I,E,B,O)=>{x=he(w,1,"dock-hover-zone svelte-1gh4iio",null,x,b),p=he(k,1,"dock svelte-1gh4iio",null,p,I),M=he(P,1,"settings-wrapper svelte-1gh4iio",null,M,E),T=he(C,1,"edit-button-wrapper svelte-1gh4iio",null,T,B),v=he(N,1,"close-wrapper svelte-1gh4iio",null,v,O)},[()=>({expanded:a()||l()}),()=>({open:t(),"expanded-close":l(),"expanded-settings":a()}),()=>({expanded:a(),hidden:l()}),()=>({hidden:a()||l(),visible:t()&&!a()&&!l()}),()=>({expanded:l(),hidden:a()})]),Ze("mouseenter",w,()=>{t(!0)}),Ze("mouseleave",w,()=>{!a()&&!l()&&t(!1)}),L(n,w),ue()}Ce(["focusin","focusout","click"]);var ls=$(`<div class="boot-screen svelte-1khd414" role="status" aria-live="polite"><svg class="logo svelte-1khd414" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 869.83 749.18" aria-label="ClearComms"><defs><style>.logo-fill {
          fill: var(--text-primary);
        }
        .logo-stroke {
          fill: none;
          stroke: var(--text-primary);
          stroke-linecap: round;
          stroke-linejoin: round;
          stroke-width: 60px;
        }</style></defs><g id="Soundwaves"><path class="logo-stroke" d="M576.28,475.23c15.17-30.28,23.72-64.46,23.72-100.64s-8.55-70.35-23.72-100.64"></path><path class="logo-stroke" d="M683.62,528.9c23.26-46.44,36.38-98.84,36.38-154.31s-13.11-107.88-36.38-154.31"></path><path class="logo-stroke" d="M790.84,582.51c31.34-62.56,48.99-133.18,48.99-207.92s-17.65-145.36-48.99-207.92"></path></g><path class="logo-fill" d="M494.9,546.34c-8.9-4.45-19.43-4.2-28.1.68-123.33,69.39-293.3-29.31-286.77-175.54-2.02-143.53,165.45-237.47,286.75-169.34,8.68,4.88,19.21,5.15,28.12.69l121.48-60.74c18.97-9.48,22.34-35.08,6.55-49.23C389.92-115.86-1.05,48.49,0,374.59c-1.05,326.1,389.98,490.45,622.93,281.72,15.79-14.15,12.41-39.74-6.55-49.23l-121.48-60.74Z"></path></svg> <p> </p> <!></div>`);function os(n,e){ce(e,!0);let t=G(e,"errorMessage",3,"");const a=V(()=>e.status==="Failed");let l=U(!1);async function c(){f(l,!0);try{await d("restart_application")}catch(p){console.error("Failed to restart application:",p),f(l,!1)}}var u=ls(),_=X(F(u),2);let m;var w=F(_,!0);H(_);var x=X(_,2);{var k=p=>{ua(p,{label:"Restart Application",loadingLabel:"Restarting...",get isLoading(){return s(l)},onclick:c,ariaLabel:"Restart application"})};J(x,p=>{s(a)&&p(k)})}H(u),me(p=>{m=he(_,1,"boot-status svelte-1khd414",null,m,p),Y(_,"role",s(a)?"alert":"status"),Se(w,s(a)?t():e.status)},[()=>({error:s(a)})]),L(n,u),ue()}async function cs(n){n.preventDefault(),await d("open_url",{url:"https://cameroncarlyon.com"})}var us=$(`<footer class="svelte-rbhk87"><p class="svelte-rbhk87">Crafted by <a href="https://cameroncarlyon.com" class="hyperlink svelte-rbhk87" aria-label="Visit Cameron Carlyon's website (opens in external browser)">Cameron Carlyon</a></p></footer>`);function ds(n,e){ce(e,!1),Oi();var t=us(),a=F(t),l=X(F(a));l.__click=[cs],H(a),H(t),L(n,t),ue()}Ce(["click"]);var vs=$('<div class="error-banner svelte-1jgbysa" role="alert" aria-live="assertive"> </div>'),gs=$("<!> <!>",1),fs=$('<p class="status-text svelte-1jgbysa">Initialising...</p>'),hs=$('<main role="application" aria-label="ClearComms" class="svelte-1jgbysa"><!> <!> <!></main>');function Ls(n,e){ce(e,!0),console.log("[ClearComms] Component script loaded");let t=U(fe([])),a=U(fe([])),l=U(fe([])),c=U(fe([])),u=U(fe(new Set)),_=U(!1),m=null,w=null,x=U(!1),k=U("Initialising..."),p=U(!1),P=U(!1),M=U(!1),g=U(null),C=U(null),T=new Map,z=new Map,N=new Map,v=U(""),A=U(!1),b=U(-1),I=fe(new Map),E=fe(new Set),B=fe(new Map),O=fe(new Map),S=fe(new Map),D=fe(new Set),j=U(!1),ee=U(!1),q=U(!1),de=U(!1),Te=U(!1),et=U(0);Le(()=>{!s(j)||s(k)!=="Ready"||s(u).size===0&&!s(A)&&f(A,!0)}),Le(()=>{(s(q)||s(Te))&&ze()}),Le(()=>{s(u).size>0&&s(k)==="Ready"&&s(a).length>0&&Ct()});const mt=200,on=200,pt=40,cn=.3;let Re=!1,Ae=0,Oe=0,We=0;const we=new Map,re=new Map,ve=new Map;let Ie=null,_t=Date.now();const un=3e5,Ee=1e3;Le(()=>{let r=new Set([...s(l).map(o=>o.processName),...s(c).map(o=>o.processName),...s(u)]).size;s(A)&&r>=1&&(r+=1),s(p)&&r!==s(b)&&(f(b,r,!0),yn(r))});function dn(){const i=new Set([...s(l).map(h=>h.processName),...s(c).map(h=>h.processName),...s(u)]),r=[],o=new Set;for(const h of s(a))i.has(h.process_name)&&!o.has(h.process_name)&&(r.push(h),o.add(h.process_name));const y=[...s(l),...s(c)];for(const h of y)o.has(h.processName)||(r.push({session_id:`inactive_${h.processName}`,display_name:h.sessionName,process_id:0,process_name:h.processName,volume:0,is_muted:!0}),o.add(h.processName));for(const h of s(u))if(!o.has(h)){const R=s(a).find(W=>W.process_name===h);R?r.push(R):r.push({session_id:`inactive_${h}`,display_name:h,process_id:0,process_name:h,volume:0,is_muted:!0}),o.add(h)}return r}function vn(){const i=new Set([...s(l).map(r=>r.processName),...s(c).map(r=>r.processName),...s(u)]);return s(a).filter(r=>!i.has(r.process_name))}const gn=i=>{const r=window.getComputedStyle(i);return r.visibility==="hidden"||r.display==="none"?!1:i.offsetParent!==null||i.getClientRects().length>0},fn=()=>Array.from(document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]')).filter(i=>!i.hasAttribute("disabled")&&i.getAttribute("aria-hidden")!=="true"&&gn(i)),hn=i=>{if(i.key!=="Tab"||i.defaultPrevented)return;const r=fn();if(r.length===0)return;const o=r[0],y=r[r.length-1],h=document.activeElement;i.shiftKey?(h===o||h===document.body||h===null)&&(i.preventDefault(),y.focus()):(h===y||h===document.body||h===null)&&(i.preventDefault(),o.focus())};function mn(){f(A,!s(A)),s(A)||(f(ee,!1),f(q,!1),s(P)&&yt(),s(M)&&Lt())}ui(()=>{Hn(),Un(),Gn(),ze(),pn(),Ct();const i=async()=>{await ze(),s(_)||(s(A)&&(f(A,!1),f(P,!1),f(M,!1),f(g,null),f(C,null),f(ee,!1)),f(Te,!1),f(q,!1),f(de,!1))},r=async()=>{await ze(),s(_)||(f(q,!1),f(de,!1),f(ee,!1))};return window.addEventListener("blur",i),window.addEventListener("focus",r),()=>{window.removeEventListener("blur",i),window.removeEventListener("focus",r)}}),di(()=>{console.log("[ClearComms] Component destroying, cleaning up resources..."),wn(),Vn(),xt(),Fn(),console.log("[ClearComms] Component cleanup complete")});async function pn(){try{f(k,"Initialising input system..."),await d("init_direct_input"),f(k,"Enumerating devices..."),await d("enumerate_input_devices"),f(k,"Reading axis values..."),await wt(),f(k,"Initialising audio manager...");try{await d("init_audio_manager"),f(p,!0),await tt()}catch(i){console.warn("Audio manager failed (non-critical):",i)}f(k,"Starting real-time polling..."),_n(),f(k,"Ready"),f(v,"")}catch(i){const r=`Initialisation failed: ${i}`;f(v,r),f(k,"Failed"),console.error("Initialisation error:",i)}}async function wt(){try{const i=await d("get_all_axis_values");f(t,i,!0)}catch(i){console.error("Error getting axis values:",i),f(v,`Error: ${i}`),f(t,[],!0)}}function _n(){m||(f(x,!0),m=setInterval(async()=>{if(Re){Oe+=1,Oe%mt===0&&console.debug(`[ClearComms] Polling skipped ${Oe} times due to in-flight iteration`);return}Re=!0;try{await wt(),await On(),await Wn(),Ae+=1,Ae>1e6&&(Ae=0,Oe=0),Ae%mt===0&&console.debug(`[ClearComms] Polling iteration ${Ae}; cached sessions ${s(a).length}; button cache size ${z.size}`)}catch(i){console.error("Polling error:",i)}finally{Re=!1}},50),Cn(),Mn())}function wn(){m&&(clearInterval(m),m=null),f(x,!1),Re=!1,bn(),Nn()}function Cn(){w||(w=setInterval(async()=>{try{await d("check_default_device_changed")&&console.log("Audio device changed - refreshing sessions"),await tt()}catch(i){console.error("Audio monitoring error:",i)}},3e3))}function bn(){w&&(clearInterval(w),w=null)}async function tt(){try{const i=await d("get_audio_sessions");for(const r of i){const o=s(a).findIndex(y=>y.session_id===r.session_id);if(o!==-1){const y=s(a)[o];D.has(r.session_id)?(r.volume=y.volume,r.is_muted=y.is_muted):E.has(r.session_id)?r.volume=y.volume:r.is_muted&&y.volume===0&&(r.volume=0)}}f(a,i,!0)}catch(i){console.error("Error getting audio sessions:",i),f(v,`Audio error: ${i}`)}}function ms(){}async function Ct(){try{await new Promise(te=>setTimeout(te,100));const i=document.querySelector(".mixer-container"),r=document.querySelector(".application-channel");if(!i||!r){console.log("[Layout] Not yet ready for measurement - mixer or channel not found");return}const o=Math.round(r.clientWidth),h=window.getComputedStyle(i).gap,R=parseInt(h)||48,K=o+80,Z=await d("update_layout_measurements",{channel_width:o,channel_gap:R,base_width:K});console.log(`[Layout] ${Z}`)}catch(i){console.error("[Layout] Failed to measure and report layout dimensions:",i)}}async function yn(i){try{await d("resize_window_to_content",{sessionCount:i})}catch(r){console.error("Error resizing window:",r)}}function Ve(i,r){if(i.startsWith("inactive_"))return;const o=s(a).findIndex(y=>y.session_id===i);o!==-1&&(s(a)[o].volume=r,s(a)[o].is_muted=r===0)}function Ln(i,r){if(i.startsWith("inactive_"))return;let o=ve.get(i);o||(o={inFlight:!1,lastSent:0},ve.set(i,o)),o.queuedVolume=r;const y=()=>{const h=ve.get(i);if(!h)return;const R=h.queuedVolume;if(R===void 0||h.inFlight)return;const W=performance.now(),K=W-h.lastSent;if(K<pt){h.timerId!==void 0&&clearTimeout(h.timerId);const te=Math.max(0,pt-K);h.timerId=window.setTimeout(()=>{const ge=ve.get(i);ge&&(ge.timerId=void 0,y())},te);return}h.inFlight=!0,h.lastSent=W,h.queuedVolume=void 0,h.timerId!==void 0&&(clearTimeout(h.timerId),h.timerId=void 0);const Z=R;(async()=>{try{await d("set_session_volume",{sessionId:i,volume:Z}),await d("set_session_mute",{sessionId:i,muted:Z===0})}catch(te){console.error(`Error applying live volume for ${i}:`,te)}finally{const te=ve.get(i);if(!te)return;te.inFlight=!1,y()}})()};y()}function Fe(i){const r=ve.get(i);r&&(r.timerId!==void 0&&clearTimeout(r.timerId),ve.delete(i))}function He(i){const r=B.get(i);if(!r)return;r.cancelled=!0,r.frameId!==void 0&&cancelAnimationFrame(r.frameId);const o=r.resolve;r.resolve=void 0,B.delete(i),E.delete(i),o==null||o(!1)}async function Ue(i,r,o=200){if(i.startsWith("inactive_"))return!1;const y=s(a).find(W=>W.session_id===i);if(!y)return!1;He(i);const h=y.volume,R=Date.now();return E.add(i),new Promise(W=>{const K={cancelled:!1,resolve:W,frameId:void 0};B.set(i,K);const Z=()=>{if(K.cancelled)return;const te=Date.now()-R,ge=Math.min(te/o,1),Je=1-Math.pow(1-ge,3),Ke=h+(r-h)*Je;Ve(i,Ke),ge<1?K.frameId=requestAnimationFrame(Z):(B.delete(i),E.delete(i),W(!0))};Z()})}function xn(i,r){if(!i.startsWith("inactive_")&&(we.set(i,r),!re.has(i))){const o=()=>{const h=we.get(i);if(h===void 0){re.delete(i);return}const R=s(a).find(ge=>ge.session_id===i);if(!R){re.delete(i),we.delete(i);return}const W=R.volume,K=h-W,Z=W+K*cn;if(Math.abs(K)<.001){Ve(i,h),re.delete(i),we.delete(i);return}Ve(i,Z);const te=requestAnimationFrame(o);re.set(i,te)},y=requestAnimationFrame(o);re.set(i,y)}}function Mn(){Ie||(Ie=setInterval(()=>{const i=Date.now();if(i-_t>un&&(Sn(),_t=i),T.size>Ee&&(console.warn("[ClearComms] Axis cache size exceeded limit, clearing"),T.clear()),z.size>Ee&&(console.warn("[ClearComms] Button cache size exceeded limit, clearing"),z.clear()),N.size>Ee&&(console.warn("[ClearComms] Hardware axis cache size exceeded limit, clearing"),N.clear()),ve.size>Ee&&(console.warn("[ClearComms] Live volume state cache size exceeded limit, clearing"),xt()),we.size>Ee){console.warn("[ClearComms] Hardware volume targets cache size exceeded limit, clearing");for(const[r,o]of re)cancelAnimationFrame(o);re.clear(),we.clear()}},3e4))}function Nn(){Ie&&(clearInterval(Ie),Ie=null)}function Sn(){const i=new Set(s(a).map(r=>r.session_id));for(const r of E)i.has(r)||E.delete(r);for(const r of D)i.has(r)||D.delete(r);for(const[r]of I)i.has(r)||I.delete(r);for(const[r,o]of re)i.has(r)||(cancelAnimationFrame(o),re.delete(r),we.delete(r));for(const[r,o]of S)i.has(r)||(cancelAnimationFrame(o),S.delete(r),O.delete(r));for(const[r]of ve)i.has(r)||Fe(r);console.log("[ClearComms] Periodic memory cleanup completed")}async function nt(i,r){if(!i.startsWith("inactive_"))try{await d("set_session_volume",{sessionId:i,volume:r}),await d("set_session_mute",{sessionId:i,muted:r===0}),await tt()}catch(o){console.error("Error setting volume:",o),f(v,`Audio error: ${o}`)}}async function bt(i,r){if(!i.startsWith("inactive_"))try{const o=s(a).find(y=>y.session_id===i);if(r&&o&&o.volume>0){I.set(i,o.volume),await Ue(i,0),await d("set_session_mute",{sessionId:i,muted:!0});const y=s(a).findIndex(h=>h.session_id===i);y!==-1&&(s(a)[y].is_muted=!0,s(a)[y].volume=0)}else if(!r){const y=I.get(i)??.5;await d("set_session_volume",{sessionId:i,volume:y}),await d("set_session_mute",{sessionId:i,muted:!1});const h=s(a).findIndex(R=>R.session_id===i);h!==-1&&(s(a)[h].is_muted=!1),await Ue(i,y,200),I.delete(i)}}catch(o){console.error("Error setting mute:",o),f(v,`Audio error: ${o}`)}}function An(i,r,o,y){f(P,!0),f(g,{sessionId:i,sessionName:r,processId:o,processName:y},!0),T.clear();for(const h of s(t))T.set(h.device_handle,{...h.axes})}function yt(){f(P,!1),f(g,null),T.clear()}function In(i,r,o,y){f(M,!0),f(C,{sessionId:i,sessionName:r,processId:o,processName:y},!0),z.clear();for(const h of s(t))z.set(h.device_handle,{...h.buttons})}function Lt(){f(M,!1),f(C,null),z.clear()}function En(){for(const i of s(t)){const r=T.get(i.device_handle);if(r)for(const[o,y]of Object.entries(i.axes)){const h=r[o];if(h===void 0)continue;if(Math.abs(y-h)>.05)return{deviceHandle:i.device_handle,deviceName:i.device_name,axisName:o}}}return null}function zn(){for(const i of s(t)){const r=z.get(i.device_handle);if(r)for(const[o,y]of Object.entries(i.buttons)){const h=r[o];if(h!==void 0&&!h&&y)return{deviceHandle:i.device_handle,deviceName:i.device_name,buttonName:o}}}return null}function Bn(i,r,o,y,h,R,W){f(l,s(l).filter(Z=>Z.processName!==W),!0);const K={deviceHandle:i,deviceName:r,axisName:o,sessionId:y,sessionName:h,processId:R,processName:W,inverted:!1};f(l,[...s(l),K],!0),f(u,new Set([...s(u),W]),!0),qe(),console.log(`[ClearComms] â Mapped ${r} ${o} â ${h}`),Ge()}function kn(i){const r=s(l).find(o=>o.processName===i);r&&(r.inverted=!r.inverted,f(l,[...s(l)],!0),console.log(`[ClearComms] Axis inversion ${r.inverted?"enabled":"disabled"} for ${r.sessionName}`),Ge())}function Dn(i){const r=s(l).find(o=>o.processName===i);r&&console.log(`[ClearComms] Removed mapping: ${r.deviceName} ${r.axisName} â ${r.sessionName}`),f(l,s(l).filter(o=>o.processName!==i),!0),Ge()}function Pn(i,r,o,y,h,R,W){f(c,s(c).filter(Z=>Z.processName!==W),!0);const K={deviceHandle:i,deviceName:r,buttonName:o,sessionId:y,sessionName:h,processId:R,processName:W};f(c,[...s(c),K],!0),f(u,new Set([...s(u),W]),!0),qe(),console.log(`[ClearComms] â Mapped ${r} ${o} â Mute ${h}`),it()}function Tn(i){const r=s(c).find(o=>o.processName===i);r&&console.log(`[ClearComms] Removed button mapping: ${r.deviceName} ${r.buttonName} â Mute ${r.sessionName}`),f(c,s(c).filter(o=>o.processName!==i),!0),it()}function Rn(i){const r=s(l).find(R=>R.processName===i);r&&console.log(`[ClearComms] Removed axis mapping for ${r.sessionName}`),f(l,s(l).filter(R=>R.processName!==i),!0);const o=s(c).find(R=>R.processName===i);o&&console.log(`[ClearComms] Removed button mapping for ${o.sessionName}`),f(c,s(c).filter(R=>R.processName!==i),!0);const y=new Set(s(u));y.delete(i),f(u,y,!0),qe(),s(u).size===0&&f(A,!1);const h=s(a).filter(R=>R.process_name===i);for(const R of h)I.delete(R.session_id),E.delete(R.session_id),D.delete(R.session_id),He(R.session_id);console.log(`[ClearComms] â Completely removed application: ${i}`),Ge(),it()}async function On(){if(s(P)&&s(g)){const i=En();i&&(Bn(i.deviceHandle,i.deviceName,i.axisName,s(g).sessionId,s(g).sessionName,s(g).processId,s(g).processName),f(P,!1),f(g,null));return}if(!(!s(p)||s(l).length===0))for(const i of s(l)){const r=s(t).find(o=>o.device_handle===i.deviceHandle);if(r&&r.axes[i.axisName]!==void 0){let o=r.axes[i.axisName];i.inverted&&(o=1-o);const y=.01;o<y?o=0:o>1-y&&(o=1);const h=`${i.deviceHandle}-${i.axisName}-${i.processName}`,R=N.get(h);if(R===void 0||Math.abs(R-o)>.01){const W=s(a).find(K=>K.process_name===i.processName);if(W&&!D.has(W.session_id))try{await d("set_session_volume",{sessionId:W.session_id,volume:o}),await d("set_session_mute",{sessionId:W.session_id,muted:o===0}),xn(W.session_id,o),N.set(h,o)}catch(K){console.error(`Error applying mapping for ${i.sessionName}:`,K)}}}}}async function Wn(){var r;if(s(M)&&s(C)){const o=zn();o&&(Pn(o.deviceHandle,o.deviceName,o.buttonName,s(C).sessionId,s(C).sessionName,s(C).processId,s(C).processName),f(M,!1),f(C,null));for(const y of s(t))z.set(y.device_handle,{...y.buttons});return}if(!s(p))return;const i=new Set(s(t).map(o=>o.device_handle));if(s(c).length>0)for(const o of s(c)){const y=s(t).find(h=>h.device_handle===o.deviceHandle);if(y&&y.buttons[o.buttonName]!==void 0){const h=y.buttons[o.buttonName];if(!((r=z.get(y.device_handle))==null?void 0:r[o.buttonName])&&h){const W=s(a).find(K=>K.process_name===o.processName);if(W){const K=!W.is_muted;bt(W.session_id,K)}}}}for(const o of s(t))z.set(o.device_handle,{...o.buttons});for(const o of Array.from(z.keys()))i.has(o)||z.delete(o);We+=1,We>1e6&&(We=0),We%on===0&&console.debug(`[ClearComms] Button state cache size ${z.size}; active handles ${i.size}`)}function Vn(){for(const[i]of B)He(i);B.clear(),E.clear();for(const[i,r]of S)cancelAnimationFrame(r);S.clear(),O.clear();for(const[i,r]of re)cancelAnimationFrame(r);re.clear(),we.clear(),console.log("[ClearComms] All animations cleaned up")}function xt(){for(const[i]of ve)Fe(i);ve.clear(),console.log("[ClearComms] Live volume states cleaned up")}function Fn(){T.clear(),z.clear(),N.clear(),I.clear(),D.clear(),we.clear(),re.clear(),O.clear(),S.clear(),f(t,[],!0),f(a,[],!0),f(l,[],!0),f(c,[],!0),console.log("[ClearComms] All caches cleared")}function Ge(){try{localStorage.setItem("clearcomms_axis_mappings",JSON.stringify(s(l)))}catch(i){console.error("Error saving mappings:",i)}}function Hn(){try{const i=localStorage.getItem("clearcomms_axis_mappings");i&&f(l,JSON.parse(i),!0)}catch(i){console.error("Error loading mappings:",i)}}function it(){try{localStorage.setItem("clearcomms_button_mappings",JSON.stringify(s(c)))}catch(i){console.error("Error saving button mappings:",i)}}function Un(){try{const i=localStorage.getItem("clearcomms_button_mappings");i&&f(c,JSON.parse(i),!0)}catch(i){console.error("Error loading button mappings:",i)}}function qe(){try{localStorage.setItem("clearcomms_pinned_apps",JSON.stringify([...s(u)]))}catch(i){console.error("Error saving pinned apps:",i)}}function Gn(){try{const i=localStorage.getItem("clearcomms_pinned_apps");i&&f(u,new Set(JSON.parse(i)),!0)}catch(i){console.error("Error loading pinned apps:",i)}finally{f(j,!0)}}async function ze(){try{f(_,await d("is_window_pinned"),!0)}catch(i){console.error("Error fetching window pin state:",i)}}async function qn(){try{await d("toggle_pin_window"),await ze()}catch(i){console.error("Error toggling window pin:",i)}}function Jn(i){const{sessionId:r}=i.detail;E.delete(r),D.add(r),He(r),Fe(r)}function Kn(i){const{sessionId:r,volume:o}=i.detail;Ve(r,o),Ln(r,o)}async function Qn(i){const{sessionId:r,volume:o}=i.detail;await nt(r,o),D.delete(r),Fe(r)}async function Yn(i){const{sessionId:r,volume:o}=i.detail;await Ue(r,o,250)&&(await nt(r,o),D.delete(r))}async function Zn(i){const{sessionId:r,volume:o}=i.detail;await Ue(r,o,150)&&await nt(r,o)}function jn(i){const{sessionId:r,muted:o}=i.detail;bt(r,o)}function Xn(i){const{session:r}=i.detail;An(r.session_id,r.display_name,r.process_id,r.process_name)}function $n(i){const{session:r}=i.detail;In(r.session_id,r.display_name,r.process_id,r.process_name)}function ei(i){Dn(i.detail.processName)}function ti(i){Tn(i.detail.processName)}function ni(i){kn(i.detail.processName)}function ii(i){Rn(i.detail.processName)}function ai(i){const{processName:r}=i.detail;f(u,new Set([...s(u),r]),!0),qe(),f(ee,!1),f(et,s(et)+1),s(A)||f(A,!0)}var Mt=ne();Ze("keydown",Ti,hn);var si=Q(Mt);{var ri=i=>{var r=hs(),o=F(r);{var y=Z=>{var te=vs(),ge=F(te,!0);H(te),me(()=>Se(ge,s(v))),L(Z,te)};J(o,Z=>{s(v)&&Z(y)})}var h=X(o,2);{var R=Z=>{const te=V(dn),ge=V(vn);var Je=gs(),Ke=Q(Je);Fa(Ke,{get boundSessions(){return s(te)},get availableSessions(){return s(ge)},get axisMappings(){return s(l)},get buttonMappings(){return s(c)},get isEditMode(){return s(A)},get isBindingMode(){return s(P)},get isButtonBindingMode(){return s(M)},get pendingBinding(){return s(g)},get pendingButtonBinding(){return s(C)},get addAppComponentKey(){return s(et)},get addAppListExpanded(){return s(ee)},set addAppListExpanded(Be){f(ee,Be,!0)},$$events:{volumedragstart:Jn,volumedragmove:Kn,volumedragend:Qn,volumetrackclick:Yn,volumewheel:Zn,mutetoggle:jn,startaxisbinding:Xn,startbuttonbinding:$n,cancelaxisbinding:yt,cancelbuttonbinding:Lt,removeaxismapping:ei,removebuttonmapping:ti,toggleinversion:ni,removeapplication:ii,select:ai}});var oi=X(Ke,2);{var ci=Be=>{rs(Be,{get isEditMode(){return s(A)},get audioInitialised(){return s(p)},get windowPinned(){return s(_)},get dockOpen(){return s(Te)},set dockOpen(ke){f(Te,ke,!0)},get settingsMenuExpanded(){return s(q)},set settingsMenuExpanded(ke){f(q,ke,!0)},get closeMenuExpanded(){return s(de)},set closeMenuExpanded(ke){f(de,ke,!0)},$$events:{toggleeditmode:mn,togglewindowpinned:qn}})};J(oi,Be=>{s(u).size>0&&Be(ci)})}L(Z,Je)},W=Z=>{var te=fs();L(Z,te)};J(h,Z=>{s(p)?Z(R):Z(W,!1)})}var K=X(h,2);ds(K,{}),H(r),L(i,r)},li=i=>{os(i,{get status(){return s(k)},get errorMessage(){return s(v)}})};J(si,i=>{s(k)==="Ready"?i(ri):i(li,!1)})}L(n,Mt),ue()}export{Ls as component};
